<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='chrome=1'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='twitter:card' content='summary'>
    <meta name='twitter:title' content='WebXR Shop'>
    <meta name='twitter:description' content='E-commerce em Realidade Aumentada'>
    <link rel='icon' type='image/png' sizes='32x32' href='assets/img/favicon-32x32.png'>
    <link rel='icon' type='image/png' sizes='96x96' href='assets/img/favicon-96x96.png'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <link href="css/loading.css" rel="stylesheet" />

    <title>WebXR Shop</title>
</head>

<body id="body">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Para clientes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="admin.html">Para lojistas</a>
                    </li>
                    <!-- <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Categorias</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li>
                                <a class="dropdown-item" href="#!">Todos os produtos</a>
                            </li>
                            <li>
                                <hr class="dropdown-divider" />
                            </li>
                            <li>
                                <a class="dropdown-item" href="#!">Cadeiras</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#!">Sofás</a>
                            </li>
                        </ul>
                    </li> -->
                </ul>
            </div>
            <a class="navbar-brand" href="index.html">WebXR Shop</a>
            <form class="d-flex">
                <div class="btn btn-outline-dark">
                    <i class="bi-cart-fill me-1"></i>
                    Carrinho
                    <span class="badge bg-dark text-white ms-1 rounded-pill" id="carrinho"></span>
                </div>
            </form>
        </div>
    </nav>
    <!-- Header-->
    <header class="bg-dark py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div class="text-center text-white">
                <!-- <h1 class="display-4 fw-bolder">WebXR Shop</h1> -->
            </div>
            <!-- Verificação de compatibilidade -->
            <div>
                <img id='canhazimg' style='width: 32px; float: left;'></img>
                <p class="lead fw-normal text-white-50 mb-0" id='canhazwebxr' style='margin-left: 48px;'></p>
            </div>
        </div>
    </header>
    <!-- Section-->
    <section class="py-5">
        <div class="container px-4 px-lg-5 mt-5 mb-5">
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div id="load"></div>
            </div>
            <div id="list" class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            </div>
        </div>
    </section>
    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container">
            <p class="m-0 text-center text-white">
                Copyright &copy; WebXR Shop 2021
            </p>
        </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
    <script type="module">
        import { list } from "./controllers/shop-controller.js";
        document.getElementById("body").onload = function () {

            list();
        };
    </script>
    <!-- Verificação de compatibilidade -->
    <script>
        function isMobile(global) {
            let check = false;
            (function (a) { if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true })(global.navigator.userAgent || global.navigator.vendor || global.opera);
            return check;
        };

        let canhazElement = document.getElementById('canhazwebxr');
        let canhazImg = document.getElementById('canhazimg');
        if (!isMobile(window)) {
            canhazElement.innerText = "O WebXR Shop é compatível apenas com dispositivos móveis (smartphones). Para melhor experiência, acesse novamente este site através de um dispositivo compatível!"
            canhazImg.src = "assets/img/info-button.png";
            localStorage.setItem("isPossible", "false");
        } else if ('xr' in navigator) {
            canhazElement.innerText = "Suporta Realidade Aumentada!"
            // canhazElement.innerText = "Seu navegador pode executar experiências de Realidade Aumentada se você estiver usando um sistema operacional compatível e o hardware apropriado."
            // navigator.xr.isSessionSupported('immersive-ar').then((supported) => {
            //     const span = document.createElement('span');
            //     span.innerText = supported ? '✔️ Suporta Realidade Aumentada' : '❌ Não suporta Realidade Aumentada';
            //     supported ? localStorage.setItem("isPossible", "true") : localStorage.setItem("isPossible", "false");
            //     canhazElement.appendChild(document.createElement('br'));
            //     canhazElement.appendChild(span);
            // });
            canhazImg.src = "assets/img/check-button.png";
        } else {
            localStorage.setItem("isPossible", "false");
            canhazElement.innerText = "Desculpe, seu navegador não suporta WebXR. Caso seja usuário de Android, tente novamente com o navegador Chrome. Caso seja usuário de iPhone, tente novamente com o navegador WebXR Viewer. "
            const a = document.createElement('a');
            a.innerHTML = '<br> <a href="https://apps.apple.com/us/app/webxr-viewer/id1295998056">Baixar WebXR Viewer</a> <br> <a href="https://play.google.com/store/apps/details?id=com.android.chrome&hl=pt_BR&gl=US">Baixar Chrome</a>';
            canhazElement.appendChild(a);
            canhazImg.src = "assets/img/x-button.png";
        }
    </script>
</body>

</html>
